name: CI

on: [pull_request]

jobs:
  linux-checks:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install dependencies
        run: sudo apt-get update && sudo apt-get install -y yamllint shellcheck zsh
      - name: Lint YAML files
        run: find . -type f -name "*.yml" -o -name "*.yaml" -print0 | xargs -0 yamllint
      - name: Lint shell scripts
        run: find . -type f -name "*.sh" -print0 | xargs -0 shellcheck
      - name: Check Zsh syntax
        run: find . -type f -name "*.zsh" -print0 | xargs -0 zsh -n

  macos-checks:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install dependencies
        run: brew install yamllint shellcheck
      - name: Lint YAML files
        run: find . -type f -name "*.yml" -o -name "*.yaml" -print0 | xargs -0 yamllint
      - name: Lint shell scripts
        run: find . -type f -name "*.sh" -print0 | xargs -0 shellcheck
      - name: Check Zsh syntax
        run: find . -type f -name "*.zsh" -print0 | xargs -0 zsh -n
